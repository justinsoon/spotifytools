<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spotify Tools</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <button class="auth-button" onclick="authenticate()">Log In
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><line x1="20" y1="8" x2="20" y2="14"></line><line x1="23" y1="11" x2="17" y2="11"></line></svg>
        </button>
        <h1>Spotify Tools</h1>
        <div class="tabs">
            <div class="tab active" onclick="showTab('story')">Story Generator</div>
            <div class="tab" onclick="showTab('genre')">Genre Playlist Sorter</div>
        </div>
        <div id="story" class="tab-content active">
            <h2>Story Generator</h2>
            <input type="text" id="playlistURL" placeholder="Enter Spotify Playlist URL">
            <button onclick="fetchSongs()">Fetch Songs</button>
            <p>Enter a Spotify playlist URL and generate a story or subliminal message from the song titles.</p>
            <div id="songPromptContainer" class="flex-container hidden">
                <div class="flex-item section">
                    <h2>Song Titles</h2>
                    <div class="code-box">
                        <textarea id="songList" readonly></textarea>
                        <button class="copy-button" onclick="copyToClipboard('songList')">Copy</button>
                    </div>
                </div>
                <div class="flex-item section">
                    <h2>AI Prompt</h2>
                    <div class="code-box">
                        <textarea id="storyOutput" readonly></textarea>
                        <button class="copy-button" onclick="copyToClipboard('storyOutput')">Copy</button>
                    </div>
                </div>
            </div>
            <div id="playlistFormContainer" class="hidden">
                <input type="text" id="playlistName" placeholder="Enter playlist name">
                <textarea id="playlistDescription" placeholder="Enter playlist description (max 300 characters)" maxlength="300"></textarea>
                <input type="text" id="songInput" placeholder="Enter songs separated by |">
                <button onclick="createSpotifyPlaylist()">Create Spotify Playlist</button>
            </div>
        </div>
        <div id="genre" class="tab-content">
            <h2>Genre Playlist Sorter</h2>
            <input type="text" id="genrePlaylistURL" placeholder="Enter Spotify Playlist URL">
            <button onclick="fetchAndCreate()">Fetch and Create</button>
            <p>Enter a Spotify playlist URL to create multiple playlists based on the main genre of the songs.</p>
            <div class="progress-bar-container hidden" id="progressContainer">
                <div class="progress-text" id="progress-text">0%</div>
                <div class="progress-bar">
                    <div class="progress" id="progress"></div>
                </div>
            </div>
            <div id="genreResults"></div>
        </div>
    </div>
    <script src="script.js"></script>
</body>
</html>